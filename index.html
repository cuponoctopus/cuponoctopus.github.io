<!doctype html>
<html lang="es">
<head>
  <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-SPGEJ4QSYM"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-SPGEJ4QSYM');
</script>
  <meta charset="utf-8">
  <meta name="google-site-verification" content="ReM8XSA0HXl46_0Ns2Cb-SYeUWrFl0noqPpxJ9-C3WQ" />
  <title>C√≥digo Descuento Octopus Energy</title>
  <meta name="description" content="Obt√©n cr√©dito en tu factura con el c√≥digo descuento Octopus Energy. Calcula tu ahorro y descubre las tarifas Octopus 3 y Relax.">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="canonical" href="https://octopusdescuento.github.io/">
  <style>
    :root {
      --verde: #009688;
      --verde-suave: #e0f2f1;
      --verde-oscuro: #00695c;
      --texto: #222;
      --gris: #666;
      --blanco: #ffffff;
      --sombra: 0 3px 8px rgba(0,0,0,.08);
    }

    body {
      font-family: "Segoe UI", Roboto, sans-serif;
      max-width: 960px;
      margin: auto;
      padding: 30px;
      line-height: 1.7;
      color: var(--texto);
      background: #fafafa;
    }

    h1, h2, h3 {
      color: var(--verde-oscuro);
    }

    h1 {
      text-align: center;
      color: var(--verde);
      margin-bottom: 0.3em;
    }

    a.cta {
      display: inline-block;
      background: var(--verde);
      color: white;
      padding: 12px 24px;
      border-radius: 8px;
      text-decoration: none;
      font-weight: bold;
      margin: 10px 0;
      transition: .2s;
    }

    a.cta:hover { opacity: 0.9; }

    .grid {
      display: grid;
      gap: 20px;
    }

    .dos {
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      align-items: start;
    }

    .card {
      background: var(--blanco);
      padding: 20px;
      border-radius: 10px;
      box-shadow: var(--sombra);
    }

    footer {
      font-size: 0.9em;
      color: var(--gris);
      margin-top: 40px;
      text-align: center;
    }

    details { margin-bottom: 10px; }

    /* === Calculadora === */
    .calc-bloque {
      background: var(--verde-suave);
      border-radius: 12px;
      padding: 25px;
      margin: 20px 0;
      box-shadow: var(--sombra);
      overflow: hidden;
      transition: max-height .6s ease;
      max-height: 0;
    }

    .calc-bloque.abierto {
      max-height: 1500px;
    }

    .calc-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 16px;
      margin-top: 10px;
    }

    label {
      font-weight: 600;
      font-size: .95rem;
    }

    input {
      width: 100%;
      padding: 10px 12px;
      border: 1px solid #ccc;
      border-radius: 6px;
      margin-top: 5px;
      font-size: 1rem;
    }

    button {
      background: var(--verde);
      color: white;
      border: none;
      padding: 10px 18px;
      border-radius: 6px;
      cursor: pointer;
      font-weight: bold;
      transition: .2s;
    }

    button:hover { opacity: .9; }

    .centrar { text-align: center; margin: 25px 0; }

    .resultado {
      background: #fff;
      margin-top: 20px;
      padding: 15px;
      border-radius: 8px;
      box-shadow: var(--sombra);
    }

    .mejor { color: #2e7d32; }
    .peor { color: #c62828; }
  </style>
</head>

<body>
  <h1 id="titulo">C√≥digo descuento Octopus Energy (Espa√±a) ‚Äî Gu√≠a</h1>
  <p class="centrar">Con mi enlace de invitaci√≥n, ambos recibimos cr√©dito en factura üíö</p>

  <p class="centrar"><a href="https://share.octopusenergy.es/dismal-omelet-766" id="enlaceRef" class="cta" rel="nofollow sponsored">üëâ Usar el c√≥digo de Octopus Energy</a></p>

  <div class="grid dos">
    <div>
      <h2>C√≥mo funciona el c√≥digo</h2>
      <ol>
        <li>Haz clic en el enlace de invitaci√≥n.</li>
        <li>Elige tu tarifa y completa el alta online.</li>
        <li>Cuando el cambio sea efectivo, se aplica el cr√©dito autom√°ticamente.</li>
      </ol>
    </div>
    <div>
      <h2>Ventajas de Octopus Energy</h2>
      <ul>
        <li>Energ√≠a 100% renovable certificada.</li>
        <li>Atenci√≥n al cliente excelente y sin permanencia.</li>
        <li>Tarifas transparentes (fija o indexada).</li>
        <li>Cr√©dito directo en factura gracias al programa de referidos.</li>
      </ul>
    </div>
  </div>

  <h2>Calculadora de ahorro</h2>
  <div class="centrar">
    <button id="btnMostrar">üí° Calcular mi ahorro</button>
  </div>

  <div id="bloqueCalc" class="calc-bloque">
    <form id="calc" class="calc-grid">
      <div><label>D√≠as del periodo</label><input type="number" id="dias" value="30" min="1"></div>
      <div><label>Potencia Punta (kW)</label><input type="number" id="pot_p1" step="0.01"></div>
      <div><label>Potencia Valle (kW)</label><input type="number" id="pot_p2" step="0.01"></div>
      <div><label>Consumo Punta (kWh)</label><input type="number" id="kwh_p" step="0.1"></div>
      <div><label>Consumo Llano (kWh)</label><input type="number" id="kwh_l" step="0.1"></div>
      <div><label>Consumo Valle (kWh)</label><input type="number" id="kwh_v" step="0.1"></div>
      <div><label>Lo que pagas ahora (‚Ç¨ / mes)</label><input type="number" id="actual" step="0.01"></div>
    </form>

    <div class="centrar">
      <button id="btnCalcular">Calcular ahorro</button>
    </div>

    <div id="resultado" class="resultado" style="display:none;"></div>
  </div>

  <h2>Mi experiencia con Octopus Energy</h2>
  <p>Me cambi√© recientemente y el proceso fue r√°pido y claro. En pocos d√≠as ten√≠a activada la luz, sin cortes ni papeleo. Adem√°s, el cr√©dito por referido apareci√≥ en mi cuenta en la primera factura. Recomiendo usar el enlace porque ambos salimos ganando.</p>

  <h2>Preguntas frecuentes</h2>
  <details><summary>¬øCu√°nto se gana con el referido de Octopus?</summary><p>Ambas partes reciben cr√©dito en factura. La cantidad puede variar seg√∫n la promoci√≥n del momento.</p></details>
  <details><summary>¬øSirve para todas las tarifas?</summary><p>S√≠, suele aplicarse a las principales tarifas dom√©sticas, tanto fija como indexada.</p></details>
  <details><summary>¬øCu√°ndo se aplica el cr√©dito?</summary><p>Cuando el cambio de comercializadora se hace efectivo, normalmente en unas semanas.</p></details>

  <p><strong>üëâ Usa mi enlace de invitaci√≥n y empieza a ahorrar:</strong></p>
  <p><a href="https://share.octopusenergy.es/dismal-omelet-766" class="cta" rel="nofollow sponsored">Usar el c√≥digo de Octopus Energy</a></p>

  <footer>
    <p>Divulgaci√≥n: este enlace es de referido, por lo que ambos recibimos cr√©dito en factura.<br><span id="fecha"></span></p>
  </footer>

  <script>
    // Cargar config.json
    let cfg={};
    fetch('config.json')
      .then(r=>r.json())
      .then(data=>{
        cfg=data;
        const titulo=`C√≥digo descuento Octopus Energy (Espa√±a) ‚Äî ${cfg.mes.charAt(0).toUpperCase()+cfg.mes.slice(1)} ${cfg.ano}`;
        document.title=titulo;
        document.getElementById('titulo').textContent=titulo;
        document.getElementById('enlaceRef').href=cfg.referido;
        document.getElementById('fecha').textContent=`Actualizado: ${cfg.mes} ${cfg.ano}`;
      });

    // Mostrar / ocultar calculadora
    const btnMostrar=document.getElementById('btnMostrar');
    const bloque=document.getElementById('bloqueCalc');
    btnMostrar.addEventListener('click',()=>{
      bloque.classList.toggle('abierto');
      btnMostrar.textContent=bloque.classList.contains('abierto')?'‚ùå Cerrar calculadora':'üí° Calcular mi ahorro';
    });

    // Calcular ahorro
    function calcular(){
      const d=v=>Number(document.getElementById(v).value)||0;
      const dias=d('dias'), potP1=d('pot_p1'), potP2=d('pot_p2'),
            kwhP=d('kwh_p'), kwhL=d('kwh_l'), kwhV=d('kwh_v'), actual=d('actual');
      if(!cfg.tarifas){alert('Esperando datos del archivo config.json');return;}
      const t=cfg.tarifas;
      const base3=((t.octopus_3.potencia_p1*potP1+t.octopus_3.potencia_p2*potP2)*dias)
                  +(t.octopus_3.energia_punta*kwhP+t.octopus_3.energia_llano*kwhL+t.octopus_3.energia_valle*kwhV);
      const baseR=((t.relax.potencia_p1*potP1+t.relax.potencia_p2*potP2)*dias)
                  +((kwhP+kwhL+kwhV)*t.relax.energia);
      const impuestos=b=>b*cfg.impuesto_electrico, contador=cfg.alquiler_dia*dias, iva=v=>(v*(1+cfg.iva));
      const total3=iva(base3+impuestos(base3)+contador);
      const totalR=iva(baseR+impuestos(baseR)+contador);
      const dif3=total3-actual, difR=totalR-actual;
      const pct3=(dif3/actual*100).toFixed(1), pctR=(difR/actual*100).toFixed(1);
      const r=document.getElementById('resultado');
      r.style.display='block';
      r.innerHTML=`<h3>Resultados</h3>
        <p>üí° Tu factura actual: <strong>${actual.toFixed(2)} ‚Ç¨</strong></p>
        <p>‚ö° Octopus 3: <strong>${total3.toFixed(2)} ‚Ç¨</strong> 
        <span class="${dif3<0?'mejor':'peor'}">(${dif3<0?'ahorras':'pagas'} ${Math.abs(dif3).toFixed(2)} ‚Ç¨ / ${Math.abs(pct3)}%)</span></p>
        <p>üåø Octopus Relax: <strong>${totalR.toFixed(2)} ‚Ç¨</strong> 
        <span class="${difR<0?'mejor':'peor'}">(${difR<0?'ahorras':'pagas'} ${Math.abs(difR).toFixed(2)} ‚Ç¨ / ${Math.abs(pctR)}%)</span></p>`;
    }
    document.getElementById('btnCalcular').addEventListener('click',calcular);
  </script>

  <!-- Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-SPGEJ4QSYM"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-SPGEJ4QSYM', { anonymize_ip: true });
  </script>
</body>
</html>
